<?php//// Менеджер продуктов//class M_Product{	private static $instance; 	// ссылка на экземпляр класса	private $msql; 				// драйвер БД		//	// Получение единственного экземпляра (одиночка)	//	public static function Instance()	{		if (self::$instance == null)			self::$instance = new M_Product();				return self::$instance;	}	//	// Конструктор	//	public function __construct()	{		$this->msql = MSQL::Instance();	}		//	// Список всех продуктов	//	public function All()	{		$query = "SELECT * 				  FROM product 				  ORDER BY id_pro DESC";				  		return $this->msql->Select($query);	}	//	// Конкретный продукт	//	public function Get($id_pro)	{		// Запрос.		$t = "SELECT * 			  FROM product 			  WHERE id_pro = '%d'";			  		$query = sprintf($t, $id_pro);		$result = $this->msql->Select($query);		return $result[0];	}	public function GetByCat($id_cat)	{		// Запрос.		$t = "SELECT * 			  FROM product 			  WHERE id_cat = '%d'";			  		$query = sprintf($t, $id_cat);		$result = $this->msql->Select($query);		return $result;	}	//	// Добавить статью	//	public function Add($pro_name, $id_cat, $img, $price, $text, $har1, $har2, $har3, $har4, $har5)	{		// Подготовка.		$pro_name = trim($pro_name);		$price = trim($price);		$text = trim($text);		$har1 = trim($har1);		$har2 = trim($har2);		$har3 = trim($har3);		$har4 = trim($har4);		$har5 = trim($har5);		// Проверка.		if ($pro_name == '')			die('не указано имя');		if ($id_cat == '')			die('не указана категория');		if ($price == '')			die('не указана цена');				// Запрос.		$obj = array();		$obj['pro_name'] = $pro_name;		$obj['id_cat'] = $id_cat;		$obj['img'] = $img;		$obj['price'] = $price;		$obj['text'] = $text;		$obj['har1'] = $har1;		$obj['har2'] = $har2;		$obj['har3'] = $har3;		$obj['har4'] = $har4;		$obj['har5'] = $har5;				$this->msql->Insert('product', $obj);		return true;	}	//	// Изменить статью	//	public function Edit($id_pro, $pro_name, $id_cat, $img, $price, $text, $har1, $har2, $har3, $har4, $har5)	{		// Подготовка.		$pro_name = trim($pro_name);		$price = trim($price);		$text = trim($text);		$har1 = trim($har1);		$har2 = trim($har2);		$har3 = trim($har3);		$har4 = trim($har4);		$har5 = trim($har5);		// Проверка.		if ($pro_name == '')			die('не указано имя');		if ($id_cat == '')			die('не указана категория');		if ($price == '')			die('не указана цена');				$obj = array();		$obj['pro_name'] = $pro_name;		$obj['id_cat'] = $id_cat;		$obj['img'] = $img;		$obj['price'] = $price;		$obj['text'] = $text;		$obj['har1'] = $har1;		$obj['har2'] = $har2;		$obj['har3'] = $har3;		$obj['har4'] = $har4;		$obj['har5'] = $har5;				$t = "id_pro = '%d'";				$where = sprintf($t, $id_pro);				$this->msql->Update('product', $obj, $where);		return true;	}	//	// Удалить статью	//	public function Delete($id_pro)	{		// Запрос.		$t = "id_pro = '%d'";				$where = sprintf($t, $id_pro);				$this->msql->Delete('product', $where);		return true;	}}