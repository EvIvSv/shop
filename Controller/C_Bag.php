<?phpinclude_once('Controller/C_Base.php');//// Конттроллер страницы отображения корзины.//class C_Bag extends C_Base{	private $masPro = array();	// массив товаров в корзине	private $sum;	//	// Конструктор.	//	function __construct()	{			    parent::__construct();	}		//	// Виртуальный обработчик запроса.	//	protected function OnInput()	{		parent::OnInput();		$this->title = 'Корзина';		if (isset($_POST['delbag']))		{			M_Bag::Instance()->DelAll();			header('Location: index.php');			die();		}		$bagPro = M_Bag::Instance()->GetBag(); 	// первичный массив товаров в корзине.		if ($bagPro == null)			$this->sum;		else		{			foreach ($bagPro as $val)			{				$tempPro = M_Product::Instance()->Get($val[0]);		// Получение товара по id				$this->masPro[] = array('id_pro'=>$tempPro['id_pro'], 'name' => $tempPro['pro_name'], 'col' => $val['1'], 										'price' => $tempPro['price']);				$this->sum += $val['1'] * $tempPro['price'];		// Подсчет общей цены товаров			}		}		if ($_GET['del'] == 1)		{			M_Bag::Instance()->Del($_GET['id']);			header('Location: index.php?str=Bag');			die();		}		if (isset($_POST['bcolpro']))		{			M_Bag::Instance()->SetCol($_POST['idcolpro'], $_POST['col']);			header('Location: index.php?str=Bag');			die();		}	}		//	// Виртуальный генератор HTML.	//	protected function OnOutput()	{		$vars = array('title' => $this->title, 'masPro' => $this->masPro, 'sum' => $this->sum);			$this->content = $this->Template('View/V_Bag.php', $vars);		parent::OnOutput();	}	}