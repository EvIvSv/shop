<?phpinclude_once('Controller.php');include_once('Model/M_Bag.php');include_once('Model/M_Product.php');include_once('Model/M_Users.php');include_once('Model/M_Category.php');//// Базовый контроллер сайта.//abstract class C_Base extends Controller{    protected $admin;			// true, если пользователь администратор	protected $title;			// заголовок страницы	protected $colBag;			// количество товаров в корзине	protected $mUsers;			// экземпляр класса Пользователь	protected $bag;				// экземпляр класса Корзина	protected $category;		// экземпляр класса Категория    protected $product;			// экземпляр класса Товар	protected $content;			// содержание страницы	protected $all_categ = array();	// список категорий	//	// Конструктор.	//	function __construct()	{ 		$this->mUsers = M_Users::Instance();		$this->bag = M_Bag::Instance();		$this->product = M_Product::Instance();        $this->category = M_Category::Instance();	}		//	// Виртуальный обработчик запроса.	//	protected function OnInput()	{        if ($_GET['out'] == 1)            M_Users::Instance()->Logout();	   	if (isset($_POST['auth']))        {            unset($_POST['auth']);            M_Users::Instance()->Login($_POST['login'], $_POST['pass'], $_POST['remember']);        }        	$this->colBag = M_Bag::Instance()->SumPro();		$this->title = '';		$this->content = '';		$this->all_categ = M_Category::Instance()->All();	}		//	// Виртуальный генератор HTML.	//		protected function OnOutput()	{		$vars = array('all_categ' => $this->all_categ, 'islogin' => $_SESSION['islogin'], 'admin' => $_SESSION['admin'], 'title' => $this->title, 'content' => $this->content,                         'colBag' => $this->colBag, 'user' => $_SESSION['User']);			$page = $this->Template('View/V_Main.php', $vars);						echo $page;   // Вывод основного шаблона.	}	}